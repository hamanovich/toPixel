(function(a){a.fn.toPixel=function(b){var c=a.extend({opacity:0.5,enable:true,imgPath:"layout.jpg",top:0,left:0,navPosition:"rightTop"},b);return this.each(function(){if(b){a.extend(c,b)}var v="<div id='pp-layout'/>",n=a("html"),m=a("body"),f=a(window),l='<img alt="'+c.imgPath.slice(0,-4)+'" src="'+c.imgPath+'" id="layoutImg">',i,w;m.prepend(v,"<div id='pp-nav'><h6 id='pp-h6'>Layout bar</h6><a href='#' id='pp-toggle'>switch off</a><div id='pp-opacity'><span>opacity:</span> <a href='#' id='pp-more'>more</a> <span>or</span> <a href='#' id='pp-less'>less</a></div><div id='pp-offset'><span>layout position:</span><div><a href='#' id='pp-left'>left++</a><span>or</span><a href='#' id='pp-right'>left--</a><input type='text' id='ppinpt-left' value='0' placeholder='left pos'></div><div><a href='#' id='pp-top'>top++</a><span>or</span><a href='#' id='pp-bottom'>top--</a><input type='text' id='ppinpt-top' value='0' placeholder='top pos'></div></div></div>");var x=a("#pp-layout"),p={ppNav:a("#pp-nav"),ppToggle:a("#pp-toggle"),ppOpacity:{ppOpacityDiv:a("#pp-opacity"),ppMore:a("#pp-more"),ppLess:a("#pp-less")},ppOffset:{ppOffsetDiv:a("#pp-offset"),ppLeft:a("#pp-left"),ppRight:a("#pp-right"),ppTop:a("#pp-top"),ppBottom:a("#pp-bottom")},ppInpt:{ppinptLeft:a("#ppinpt-left"),ppinptTop:a("#ppinpt-top")}},q=p.ppOpacity,k=p.ppOffset,g=p.ppInpt,h=g.ppinptLeft,s=g.ppinptTop,o=["leftTop","rightTop","leftBottom","rightBottom"],d=a("#layoutImg");var j=u("top")?u("top"):c.top,e=u("left")?u("left"):c.left,t=u("opacity")?u("opacity"):c.opacity;f.load(function(){x.prepend(l);a("#ppinpt-left").val(300);x.css({top:j+"px",opacity:t,left:e+"px","z-index":9999,position:"absolute",filter:"progid:DXImageTransform.Microsoft.Alpha(opacity="+parseFloat(t)*100+")",filter:"alpha(opacity="+parseFloat(t)*100+")"});p.ppNav.find("a").click(function(y){y.preventDefault()});if(c.enable){p.ppToggle.click(function(y){if(c.enable){c.enable=false;x.hide();p.ppToggle.text("switch on")}else{c.enable=true;x.show();p.ppToggle.text("switch off")}});q.ppMore.click(function(){if(parseFloat(u("opacity"))<1){c.opacity=parseFloat(u("opacity"))+0.1;x.css({opacity:c.opacity,filter:"progid:DXImageTransform.Microsoft.Alpha(opacity="+c.opacity*100+")",filter:"alpha(opacity="+c.opacity*100+")"})}else{x.css({opacity:1,filter:"progid:DXImageTransform.Microsoft.Alpha(opacity="+100+")",filter:"alpha(opacity="+100+")"})}});q.ppLess.click(function(){if(parseFloat(u("opacity"))>0){c.opacity=parseFloat(u("opacity"))-0.1;x.css({opacity:c.opacity,filter:"progid:DXImageTransform.Microsoft.Alpha(opacity="+c.opacity*100+")",filter:"alpha(opacity="+c.opacity*100+")"})}else{x.css({opacity:c.opacity,filter:"progid:DXImageTransform.Microsoft.Alpha(opacity="+c.opacity*100+")",filter:"alpha(opacity="+c.opacity*100+")"})}});s.val(j);k.ppTop.click(function(){i=parseInt(g.ppinptTop.val());i+=1;x.css("top",i);g.ppinptTop.val(i)});g.ppinptTop.change(function(){if(g.ppinptTop.val()!==""&&g.ppinptTop){i=parseInt(g.ppinptTop.val())}else{i=0}x.css("top",i);g.ppinptTop.val(i)});k.ppBottom.click(function(){i=parseInt(g.ppinptTop.val());i-=1;x.css("top",i);g.ppinptTop.val(i)});h.val(e);k.ppLeft.click(function(){w=parseInt(x.css("left"));w+=1;x.css("left",w);g.ppinptLeft.val(parseInt(w))});g.ppinptLeft.change(function(){if(g.ppinptLeft.val()!==""&&g.ppinptLeft){w=parseInt(g.ppinptLeft.val())}else{w=0}x.css("left",w);g.ppinptLeft.val(w)});k.ppRight.click(function(){w=parseInt(x.css("left"));w-=1;x.css("left",w);g.ppinptLeft.val(parseInt(w))})}else{p.ppNav.hide()}if(c.enable){x.mouseenter(function(){var y=a(this);y.hide()});p.ppNav.mouseenter(function(){x.show()});n.mouseleave(function(){x.show()})}else{x.hide()}switch(c.navPosition){case o[0]:p.ppNav.css({left:0,top:0,right:"auto"});break;case o[2]:p.ppNav.css({left:0,right:"auto",bottom:0,top:"auto"});break;case o[3]:p.ppNav.css({left:"auto",right:0,bottom:0,top:"auto"});break;default:p.ppNav.css({right:0,top:0,left:"auto"})}q.ppMore.click(r);q.ppLess.click(r);h.change(r);s.change(r);k.ppLeft.click(r);k.ppRight.click(r);k.ppTop.click(r);k.ppBottom.click(r)});function r(){document.cookie="left="+encodeURIComponent(h.val())+"; max-age="+(24*60*60);document.cookie="top="+encodeURIComponent(s.val())+"; max-age="+(24*60*60);document.cookie="opacity="+encodeURIComponent(parseFloat(c.opacity.toFixed(1)+0.1))+"; max-age="+(24*60*60)}function u(y){var z=document.cookie.match(new RegExp("(?:^|; )"+y.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return z?decodeURIComponent(z[1]):undefined}p.ppNav.css({position:"fixed",right:0,top:0,"font-family":"sans-serif","font-size":"12px",border:"1px solid #e7e7e7","background-color":"#f2f2f2",padding:"10px 10px 5px",margin:"10px","line-height":"20px",width:"100px","z-index":9999});p.ppNav.find("a").css({color:"#464646"});p.ppNav.find(">div").css({margin:"5px 0"});p.ppNav.find("h6").css({"font-size":"12px",margin:"0 0 8px","text-align":"center",padding:0});p.ppOffset.ppOffsetDiv.find(">div>span").css({margin:"0 5px"});p.ppOpacity.ppOpacityDiv.find(">div>span").css({margin:"0 5px"});p.ppOffset.ppOffsetDiv.find(">span").css({display:"block","font-weight":"bold"});p.ppOpacity.ppOpacityDiv.find(">span:first-child").css({display:"block","font-weight":"bold"});p.ppNav.find("input").css({width:"100%","text-align":"center",margin:"5px 0","font-size":"11px","font-family":"sans-serif",padding:0,border:"1px solid","line-height":"18px",height:"18px","background-color":"#fff"})})}})(jQuery);