(function(a){a.fn.toPixel=function(b){var c=a.extend({opacity:0.5,enable:true,imgPath:"layout.jpg",top:0,left:"50%",navPosition:"rightTop"},b);return this.each(function(){if(b){a.extend(c,b)}var l="<div id='pp-layout'/>",k=a("html"),m=a("body"),d='<img alt="'+c.imgPath.slice(0,-4)+'" src="pp/'+c.imgPath+'">',h,g;m.prepend(l,"<div id='pp-nav'><h6 id='pp-h6'>Layout bar</h6><a href='#' id='pp-toggle'>switch off</a><div id='pp-opacity'><span>opacity:</span> <a href='#' id='pp-more'>more</a> <span>or</span> <a href='#' id='pp-less'>less</a></div><div id='pp-offset'><span>layout position:</span><div><a href='#' id='pp-left'>left++</a><span>or</span><a href='#' id='pp-right'>left--</a><input type='text' id='ppinpt-left' value='0' placeholder='left pos'></div><div><a href='#' id='pp-top'>top++</a><span>or</span><a href='#' id='pp-bottom'>top--</a><input type='text' id='ppinpt-top' value='0' placeholder='top pos'></div></div></div>");var o=a("#pp-layout"),n={ppNav:a("#pp-nav"),ppToggle:a("#pp-toggle"),ppOpacity:{ppOpacityDiv:a("#pp-opacity"),ppMore:a("#pp-more"),ppLess:a("#pp-less")},ppOffset:{ppOffsetDiv:a("#pp-offset"),ppLeft:a("#pp-left"),ppRight:a("#pp-right"),ppTop:a("#pp-top"),ppBottom:a("#pp-bottom")},ppInpt:{ppinptLeft:a("#ppinpt-left"),ppinptTop:a("#ppinpt-top")}},i=n.ppOpacity,e=n.ppOffset,j=n.ppInpt,f=["leftTop","rightTop","leftBottom","rightBottom"];o.prepend(d);o.css({"margin-left":-o.find("img").width()/2,opacity:c.opacity,left:c.left,top:c.top,filter:"progid:DXImageTransform.Microsoft.Alpha(opacity="+c.opacity*100+")",filter:"alpha(opacity="+c.opacity*100+")"});n.ppNav.find("a").click(function(p){p.preventDefault()});if(c.enable){n.ppToggle.click(function(p){if(c.enable){c.enable=false;o.hide();n.ppToggle.text("switch on")}else{c.enable=true;o.show();n.ppToggle.text("switch off")}});i.ppMore.click(function(){if(parseFloat(c.opacity.toFixed(1))<1){c.opacity=parseFloat(c.opacity.toFixed(1))+0.1;o.css({opacity:c.opacity,filter:"progid:DXImageTransform.Microsoft.Alpha(opacity="+c.opacity*100+")",filter:"alpha(opacity="+c.opacity*100+")"})}else{o.css({opacity:1,filter:"progid:DXImageTransform.Microsoft.Alpha(opacity="+100+")",filter:"alpha(opacity="+100+")"})}});i.ppLess.click(function(){if(parseFloat(c.opacity.toFixed(1))>0){c.opacity=parseFloat(c.opacity.toFixed(1))-0.1;o.css({opacity:c.opacity,filter:"progid:DXImageTransform.Microsoft.Alpha(opacity="+c.opacity*100+")",filter:"alpha(opacity="+c.opacity*100+")"})}else{o.css({opacity:0,filter:"progid:DXImageTransform.Microsoft.Alpha(opacity="+0+")",filter:"alpha(opacity="+0+")"})}});j.ppinptTop.val(parseInt(o.css("top"))+"px");e.ppTop.click(function(){h=parseInt(j.ppinptTop.val());h+=1;o.css("top",h);j.ppinptTop.val(h+"px")});j.ppinptTop.blur(function(){h=parseInt(j.ppinptTop.val());o.css("top",h);j.ppinptTop.val(h+"px")});e.ppBottom.click(function(){h=parseInt(j.ppinptTop.val());h-=1;o.css("top",h);j.ppinptTop.val(h+"px")});j.ppinptLeft.val(parseInt(o.css("margin-left"))+"px");e.ppLeft.click(function(){g=parseInt(o.css("margin-left"));g+=1;o.css("margin-left",g);j.ppinptLeft.val(parseInt(g)+"px")});j.ppinptLeft.blur(function(){g=parseInt(j.ppinptLeft.val());o.css("margin-left",g);j.ppinptLeft.val(g+"px")});e.ppRight.click(function(){g=parseInt(o.css("margin-left"));g-=1;o.css("margin-left",g);j.ppinptLeft.val(parseInt(g)+"px")})}if(c.enable){o.mouseenter(function(){var p=a(this);p.hide()});n.ppNav.mouseenter(function(){o.show()});k.mouseleave(function(){o.show()})}else{o.hide()}switch(c.navPosition){case f[0]:n.ppNav.css({left:0,top:0,right:"auto"});break;case f[2]:n.ppNav.css({left:0,right:"auto",bottom:0,top:"auto"});break;case f[3]:n.ppNav.css({left:"auto",right:0,bottom:0,top:"auto"});break;default:n.ppNav.css({right:0,top:0,left:"auto"})}})}})(jQuery);